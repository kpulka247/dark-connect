/* Map Controls Container */
.map-controls .map-control-item {
  background: var(--color-overlay-dark-90) !important;
  color: var(--text-primary) !important;
}

/* Specific Map Controls */
.activity-map-view-container {
  /* Map container background */
  background-color: var(--background-secondary) !important;
}

.page.activity-detail .weather .map-control-item {
  /* Weather overlay control */
  background: var(--color-overlay-dark-90) !important;
  border-color: var(--border-default) !important;
}

button[class*="NavigateToUserLocationButton_goToUserLocationButton_"],
button[class*="SearchForUserProvidedLocationData_locationFilterSubmit_"] {
  border-color: var(--border-default) !important;
}

div[class*="MapProviderContainer_centerMapIcon_"] {
  /* Center map button icon styling */
  filter: invert(1);
  background-color: var(--color-gray-icon) !important;
  border-color: var(--color-gray-icon) !important;
}

/* Leaflet Controls */
a[class^="leaflet-control-zoom"],
a[class="leaflet-control-toggle-toggle"] {
  background: var(--background-primary) !important;
  border-color: var(--border-default) !important;
  color: var(--text-primary) !important;
}

div[class*="MapProviderContainer__layerControlButtonContainer_"],
.leaflet-control > button {
  /* Generic leaflet button */
  background-color: var(--background-primary) !important;
}

.leaflet-control > button:enabled:not(.leaflet-disabled):hover {
  /* Leaflet button hover */
  background-color: var(--background-secondary) !important;
}

.leaflet-control:not(:last-child) > button {
  /* Border between leaflet buttons */
  border-color: var(--border-default) !important;
}

/* Map Layer Selection / Legend */
.map-layer {
  background-color: var(--background-primary) !important;
  color: var(--text-primary) !important;
}

[class*="MapType__unselected_"] {
  border-color: var(--background-primary) !important;
}

.layer-tile-style.active {
  box-shadow: inset 0 0 0 2px var(--color-gray-dark) !important;
}

span[class*="MapLayersProvider_layerTileStyleLabel_"] {
  background-color: var(--background-primary) !important;
  color: var(--text-primary) !important;
}

div[class*="ActivityMapView_mapLayerLegend_"] {
  background: var(--background-primary) !important;
}

div[class*="GarminMapLegend_legendModal_"] {
  /* General Legend Modal */
  background-color: var(--background-primary) !important;
}

div[class*="MapProviderContainer__layerControlButton_"] {
  /* Layer control icon filter */
  filter: invert(1);
}

div[class*="GarminMapLegend_legendIcon_"] {
  /* Legend icon filter */
  filter: invert(1);
}

div[class*="LegendItems_title_"] {
  /* Legend title text */
  color: var(--text-primary) !important;
}

/* Map Search */
.map-fitness .map-search button {
  /* Segments search button */
  background-color: var(--background-primary) !important;
  border-color: var(--border-default) !important;
}

.map-fitness .map-search .icon-search {
  /* Segments search icon */
  color: var(--text-primary) !important;
}

/* Map Popups / Dialogs / Context Menus */
div[class*="MapProviderContainer__controlDialogOpen_"] {
  background-color: var(--background-primary) !important;
  border-color: var(--border-default) !important;
  box-shadow: 0 0 2px var(--color-gray-light) !important;
}

[class*="CourseMap_hazardDialogText_"] {
  color: var(--text-primary) !important;
}

/* Map Lines / Paths */
path[class="leaflet-interactive"][stroke="#000000"] {
  stroke: var(--color-black) !important;
  /* Keep black for visibility? Or change? Original had #000 */
}

/* Map Markers */
.course-pt-lap,
div[class*="LapMarker_marker_"] {
  color: var(--color-gray-light) !important;
}

/* Map Attribution */
.gm-style .gm-style-cc a,
.gm-style .gm-style-cc button,
.gm-style .gm-style-cc span,
.leaflet-control-attribution a {
  color: var(--color-black) !important;
  /* Keep default light attribution on dark map */
}
